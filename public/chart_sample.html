<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="include/js/jquery/jquery-1.11.3.min.js"></script>
    <script src="https://www.google.com/jsapi"></script>
    <script src="include/js/chart/chart.js"></script>
    <script>
      $(function(){
        //第一種方式，直接使用ＡＰＩ方式取得
        var options = {
          url: "http://211.21.170.18:99/sar/report",
          urlMethod: "GET",
          sendData: {},
          drawItemID: 'testChart',
          unitTitle:"人次",
          bottomTitle:"工種",
          chartsHelp: "bottom", //top,left,right,bottom; 預設為bottom
          drawType:"ColumnChart", //drawType 可使用 ColumnChart、LineChart 兩種
          resultIndex: "data",//資料回傳的參數索引值
          annotation: true //default是false
        };
        createChart(options);
        

        //第二種，自己抓取ＤＡＴＡ處理後交由ＡＰＩ繪製
        var dataSample = getChartsDataSample();
        //console.log(dataSample);
        var options = {
          drawItemID: 'testChart2',
          unitTitle: dataSample.ChartHead.ChartAxisUnit.AxisY,
          //bottomTitle: dataSample.ChartHead.ChartAxisUnit.AxisX,
          chartsHelp: "right", //top,left,right,bottom; 預設為bottom
          drawType:"LineChart", //drawType 可使用 ColumnChart、LineChart 兩種
          annotation: true //default是false
        };
        var setTitleArr = ["Data",dataSample.ChartLine.PlanLine,dataSample.ChartLine.RealLine];
        var dataArr = processDataSample(setTitleArr,dataSample.ChartContent);
        createChart(options,dataArr);
        //結束第二種
      });

      function getChartsDataSample(){
        var chartsData;
        $.ajax({
            url: location.origin+"/charts.text",
            type: "GET",
            dataType: "JSON",
            async: false,
            success: function(rs){
                chartsData = rs;
                //console.log(rs)
            }
        });
        return chartsData;
      }

      function processDataSample(titleArray,data){
        var reData = [];
        reData[0] = titleArray;
        $.each(data,function(i,v){
          //console.log(i,v);
          reData[reData.length] = [v.sDate,v.dbPlan,v.dbReal];
        });
        return reData;
      }
      //清除圖片請使用 resetChart(itemID)
    </script>
  </head>
  <body>
    <div id="testChart"></div>
    <div id="testChart2"></div>
  </body>
</html>